CREATE TABLE ASIGNATURA (REFERENCIA BIGINT NOT NULL, DTYPE VARCHAR(31), CARACTER VARCHAR(255), CODIGO BIGINT NOT NULL, CREDITOS_PRACTICOS INTEGER NOT NULL, CREDITOS_TEORICOS INTEGER NOT NULL, CREDITOS_TOTALES INTEGER NOT NULL, CURSO VARCHAR(255), DURACION VARCHAR(255), IDIOMAS VARCHAR(255), NOMBRE VARCHAR(255) NOT NULL, OFERTA INTEGER NOT NULL, UNIDAD_TEMPORAL VARCHAR(255), ASIGNATURA_MATRICULA_ID BIGINT, HORA_INICIO VARCHAR(255), DIA VARCHAR(255), GRUPO_ASIGNATURA_CURSO_ACADEMICO VARCHAR(255), MENCION VARCHAR(255), PLAZAS INTEGER NOT NULL, PRIMARY KEY (REFERENCIA));
CREATE TABLE CENTRO (ID BIGINT NOT NULL AUTO_INCREMENT, TLF_CONSERJERIA BIGINT, DIRECCION VARCHAR(255) NOT NULL, NOMBRE VARCHAR(255) NOT NULL, PRIMARY KEY (ID));
CREATE TABLE GRUPO_ASIGNATURA (CURSO_ACADEMICO VARCHAR(255) NOT NULL, OFERTA VARCHAR(255), PRIMARY KEY (CURSO_ACADEMICO));
CREATE TABLE GRUPO (ID BIGINT NOT NULL AUTO_INCREMENT, ASIGNAR TINYINT(1) default 0, CURSO VARCHAR(255) NOT NULL, INGLES TINYINT(1) default 0 NOT NULL, LETRA VARCHAR(255) NOT NULL, PLAZAS BIGINT, TURNO_MAÃ‘ANA_TARDE VARCHAR(255) NOT NULL, VISIBLE TINYINT(1) default 0, GRUPO_ID BIGINT, GRUPO_ASIGNATURA_CURSO_ACADEMICO VARCHAR(255), PRIMARY KEY (ID));
CREATE TABLE MATRICULA (ID BIGINT NOT NULL AUTO_INCREMENT, CURSO_ACADEMICO VARCHAR(255) NOT NULL, ESTADO VARCHAR(255) NOT NULL, FECHA_MATRICULA DATE NOT NULL, NUEVO_INGRESO TINYINT(1) default 0, NUM_ARCHIVO BIGINT, TURNO_PREFERENTE VARCHAR(255), ASIGNATURAS_MATRICULA_ID BIGINT, PRIMARY KEY (ID));
CREATE TABLE TITULACION (CODIGO BIGINT NOT NULL AUTO_INCREMENT, CREDITOS INTEGER, NOMBRE VARCHAR(255), TITULACION_CODIGO BIGINT, PRIMARY KEY (CODIGO));
CREATE TABLE EXPEDIENTE (NUM_EXPEDIENTE BIGINT NOT NULL, ACTIVO TINYINT(1) default 0, NOTA_MEDIA_PROVISIONAL BIGINT, ENCUESTA_ID INTEGER, MATRICULA_ID BIGINT, PRIMARY KEY (NUM_EXPEDIENTE));
CREATE TABLE ASIGNATURAS_MATRICULA (ID BIGINT NOT NULL AUTO_INCREMENT, CALIFICACION INTEGER, MATRICULA_ID BIGINT, PRIMARY KEY (ID));
CREATE TABLE ENCUESTA (ID INTEGER NOT NULL AUTO_INCREMENT, FECHA_ENVIO DATE NOT NULL, PRIMARY KEY (ID));
CREATE TABLE ALUMNO (ID BIGINT NOT NULL AUTO_INCREMENT, CP VARCHAR(255), DNI VARCHAR(255) NOT NULL, APELLIDO1 VARCHAR(255) NOT NULL, APELLIDO2 VARCHAR(255), DIRECCION VARCHAR(255), EMAIL_I VARCHAR(255) NOT NULL, EMAIL_P VARCHAR(255), LOCALIDAD VARCHAR(255), MOVIL BIGINT, NOMBRE VARCHAR(255) NOT NULL, PROVINCIA VARCHAR(255), TELEFONO BIGINT, PRIMARY KEY (ID));
CREATE TABLE CLASE (HORA_INICIO VARCHAR(255) NOT NULL, DIA VARCHAR(255) NOT NULL, AULA VARCHAR(255), HORA_FIN VARCHAR(255), PRIMARY KEY (HORA_INICIO, DIA));
CREATE TABLE TITULACION_CENTRO (centros_ID BIGINT NOT NULL, titulaciones_CODIGO BIGINT NOT NULL, PRIMARY KEY (centros_ID, titulaciones_CODIGO));
CREATE TABLE GRUPO_ASIGNATURA_ASIGNATURA (Grupo_asignatura_CURSO_ACADEMICO VARCHAR(255) NOT NULL, asignatura_REFERENCIA BIGINT NOT NULL, PRIMARY KEY (Grupo_asignatura_CURSO_ACADEMICO, asignatura_REFERENCIA));
CREATE TABLE GRUPO_ASIGNATURA_ENCUESTA (grupo_asignaturas_CURSO_ACADEMICO VARCHAR(255) NOT NULL, ENCUESTA_ID INTEGER NOT NULL, PRIMARY KEY (grupo_asignaturas_CURSO_ACADEMICO, ENCUESTA_ID));
CREATE TABLE GRUPO_ASIGNATURA_GRUPO (Grupo_asignatura_CURSO_ACADEMICO VARCHAR(255) NOT NULL, grupo_ID BIGINT NOT NULL, PRIMARY KEY (Grupo_asignatura_CURSO_ACADEMICO, grupo_ID));
CREATE TABLE GRUPO_GRUPO (Grupo_ID BIGINT NOT NULL, grupos_ID BIGINT NOT NULL, PRIMARY KEY (Grupo_ID, grupos_ID));
CREATE TABLE GRUPO_TITULACION (Grupo_ID BIGINT NOT NULL, titulacion_CODIGO BIGINT NOT NULL, PRIMARY KEY (Grupo_ID, titulacion_CODIGO));
CREATE TABLE MATRICULA_EXPEDIENTE (Matricula_ID BIGINT NOT NULL, expedientes_NUM_EXPEDIENTE BIGINT NOT NULL, PRIMARY KEY (Matricula_ID, expedientes_NUM_EXPEDIENTE));
CREATE TABLE MATRICULA_ASIGNATURA (Matricula_ID BIGINT NOT NULL, listado_asignaturas_REFERENCIA BIGINT NOT NULL, PRIMARY KEY (Matricula_ID, listado_asignaturas_REFERENCIA));
CREATE TABLE TITULACION_ASIGNATURA (Titulacion_CODIGO BIGINT NOT NULL, asignaturas_REFERENCIA BIGINT NOT NULL, PRIMARY KEY (Titulacion_CODIGO, asignaturas_REFERENCIA));
CREATE TABLE TITULACION_EXPEDIENTE (Titulacion_CODIGO BIGINT NOT NULL, expedientes_NUM_EXPEDIENTE BIGINT NOT NULL, PRIMARY KEY (Titulacion_CODIGO, expedientes_NUM_EXPEDIENTE));
CREATE TABLE TITULACION_GRUPO (Titulacion_CODIGO BIGINT NOT NULL, grupos_ID BIGINT NOT NULL, PRIMARY KEY (Titulacion_CODIGO, grupos_ID));
CREATE TABLE ASIGNATURAS_MATRICULA_ASIGNATURA (Asignaturas_matricula_ID BIGINT NOT NULL, asignatura_REFERENCIA BIGINT NOT NULL, PRIMARY KEY (Asignaturas_matricula_ID, asignatura_REFERENCIA));
CREATE TABLE ASIGNATURAS_MATRICULA_GRUPO (Asignaturas_matricula_ID BIGINT NOT NULL, grupo_ID BIGINT NOT NULL, PRIMARY KEY (Asignaturas_matricula_ID, grupo_ID));
CREATE TABLE ENCUESTA_EXPEDIENTE (Encuesta_ID INTEGER NOT NULL, expedientes_NUM_EXPEDIENTE BIGINT NOT NULL, PRIMARY KEY (Encuesta_ID, expedientes_NUM_EXPEDIENTE));
CREATE TABLE ALUMNO_EXPEDIENTE (Alumno_ID BIGINT NOT NULL, expedientes_NUM_EXPEDIENTE BIGINT NOT NULL, PRIMARY KEY (Alumno_ID, expedientes_NUM_EXPEDIENTE));
CREATE TABLE CLASE_ASIGNATURA (HORA_INICIO VARCHAR(255) NOT NULL, DIA VARCHAR(255) NOT NULL, asignatura_REFERENCIA BIGINT NOT NULL, PRIMARY KEY (HORA_INICIO, DIA, asignatura_REFERENCIA));
CREATE TABLE CLASE_GRUPO (HORA_INICIO VARCHAR(255) NOT NULL, DIA VARCHAR(255) NOT NULL, grupo_ID BIGINT NOT NULL, PRIMARY KEY (HORA_INICIO, DIA, grupo_ID));
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_HORA_INICIO FOREIGN KEY (HORA_INICIO, DIA) REFERENCES CLASE (HORA_INICIO, DIA);
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_ASIGNATURA_MATRICULA_ID FOREIGN KEY (ASIGNATURA_MATRICULA_ID) REFERENCES ASIGNATURAS_MATRICULA (ID);
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_GRUPO_ASIGNATURA_CURSO_ACADEMICO FOREIGN KEY (GRUPO_ASIGNATURA_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO);
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_ASIGNATURA_CURSO_ACADEMICO FOREIGN KEY (GRUPO_ASIGNATURA_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO);
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID);
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_ASIGNATURAS_MATRICULA_ID FOREIGN KEY (ASIGNATURAS_MATRICULA_ID) REFERENCES ASIGNATURAS_MATRICULA (ID);
ALTER TABLE TITULACION ADD CONSTRAINT FK_TITULACION_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO);
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_ENCUESTA_ID FOREIGN KEY (ENCUESTA_ID) REFERENCES ENCUESTA (ID);
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_MATRICULA_ID FOREIGN KEY (MATRICULA_ID) REFERENCES MATRICULA (ID);
ALTER TABLE ASIGNATURAS_MATRICULA ADD CONSTRAINT FK_ASIGNATURAS_MATRICULA_MATRICULA_ID FOREIGN KEY (MATRICULA_ID) REFERENCES MATRICULA (ID);
ALTER TABLE TITULACION_CENTRO ADD CONSTRAINT FK_TITULACION_CENTRO_titulaciones_CODIGO FOREIGN KEY (titulaciones_CODIGO) REFERENCES TITULACION (CODIGO);
ALTER TABLE TITULACION_CENTRO ADD CONSTRAINT FK_TITULACION_CENTRO_centros_ID FOREIGN KEY (centros_ID) REFERENCES CENTRO (ID);
ALTER TABLE GRUPO_ASIGNATURA_ASIGNATURA ADD CONSTRAINT GRPASIGNATURAASIGNATURAGrpasignaturaCURSOACADEMICO FOREIGN KEY (Grupo_asignatura_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO);
ALTER TABLE GRUPO_ASIGNATURA_ASIGNATURA ADD CONSTRAINT GRUPO_ASIGNATURA_ASIGNATURA_asignatura_REFERENCIA FOREIGN KEY (asignatura_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA);
ALTER TABLE GRUPO_ASIGNATURA_ENCUESTA ADD CONSTRAINT GRPASIGNATURAENCUESTAgrpoasignaturasCURSOACADEMICO FOREIGN KEY (grupo_asignaturas_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO);
ALTER TABLE GRUPO_ASIGNATURA_ENCUESTA ADD CONSTRAINT FK_GRUPO_ASIGNATURA_ENCUESTA_ENCUESTA_ID FOREIGN KEY (ENCUESTA_ID) REFERENCES ENCUESTA (ID);
ALTER TABLE GRUPO_ASIGNATURA_GRUPO ADD CONSTRAINT GRUPOASIGNATURAGRUPOGrupoasignaturaCURSO_ACADEMICO FOREIGN KEY (Grupo_asignatura_CURSO_ACADEMICO) REFERENCES GRUPO_ASIGNATURA (CURSO_ACADEMICO);
ALTER TABLE GRUPO_ASIGNATURA_GRUPO ADD CONSTRAINT FK_GRUPO_ASIGNATURA_GRUPO_grupo_ID FOREIGN KEY (grupo_ID) REFERENCES GRUPO (ID);
ALTER TABLE GRUPO_GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_grupos_ID FOREIGN KEY (grupos_ID) REFERENCES GRUPO (ID);
ALTER TABLE GRUPO_GRUPO ADD CONSTRAINT FK_GRUPO_GRUPO_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID);
ALTER TABLE GRUPO_TITULACION ADD CONSTRAINT FK_GRUPO_TITULACION_Grupo_ID FOREIGN KEY (Grupo_ID) REFERENCES GRUPO (ID);
ALTER TABLE GRUPO_TITULACION ADD CONSTRAINT FK_GRUPO_TITULACION_titulacion_CODIGO FOREIGN KEY (titulacion_CODIGO) REFERENCES TITULACION (CODIGO);
ALTER TABLE MATRICULA_EXPEDIENTE ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_expedientes_NUM_EXPEDIENTE FOREIGN KEY (expedientes_NUM_EXPEDIENTE) REFERENCES EXPEDIENTE (NUM_EXPEDIENTE);
ALTER TABLE MATRICULA_EXPEDIENTE ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_Matricula_ID FOREIGN KEY (Matricula_ID) REFERENCES MATRICULA (ID);
ALTER TABLE MATRICULA_ASIGNATURA ADD CONSTRAINT FK_MATRICULA_ASIGNATURA_Matricula_ID FOREIGN KEY (Matricula_ID) REFERENCES MATRICULA (ID);
ALTER TABLE MATRICULA_ASIGNATURA ADD CONSTRAINT MATRICULA_ASIGNATURAlistado_asignaturas_REFERENCIA FOREIGN KEY (listado_asignaturas_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA);
ALTER TABLE TITULACION_ASIGNATURA ADD CONSTRAINT FK_TITULACION_ASIGNATURA_asignaturas_REFERENCIA FOREIGN KEY (asignaturas_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA);
ALTER TABLE TITULACION_ASIGNATURA ADD CONSTRAINT FK_TITULACION_ASIGNATURA_Titulacion_CODIGO FOREIGN KEY (Titulacion_CODIGO) REFERENCES TITULACION (CODIGO);;
ALTER TABLE TITULACION_EXPEDIENTE ADD CONSTRAINT TITULACION_EXPEDIENTE_expedientes_NUM_EXPEDIENTE FOREIGN KEY (expedientes_NUM_EXPEDIENTE) REFERENCES EXPEDIENTE (NUM_EXPEDIENTE);
ALTER TABLE TITULACION_EXPEDIENTE ADD CONSTRAINT FK_TITULACION_EXPEDIENTE_Titulacion_CODIGO FOREIGN KEY (Titulacion_CODIGO) REFERENCES TITULACION (CODIGO);
ALTER TABLE TITULACION_GRUPO ADD CONSTRAINT FK_TITULACION_GRUPO_Titulacion_CODIGO FOREIGN KEY (Titulacion_CODIGO) REFERENCES TITULACION (CODIGO);
ALTER TABLE TITULACION_GRUPO ADD CONSTRAINT FK_TITULACION_GRUPO_grupos_ID FOREIGN KEY (grupos_ID) REFERENCES GRUPO (ID);
ALTER TABLE ASIGNATURAS_MATRICULA_ASIGNATURA ADD CONSTRAINT SIGNATURASMATRICULAASIGNATURAsignaturasmatriculaID FOREIGN KEY (Asignaturas_matricula_ID) REFERENCES ASIGNATURAS_MATRICULA (ID);
ALTER TABLE ASIGNATURAS_MATRICULA_ASIGNATURA ADD CONSTRAINT ASIGNATURASMATRICULAASIGNATURAasignaturaREFERENCIA FOREIGN KEY (asignatura_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA);
ALTER TABLE ASIGNATURAS_MATRICULA_GRUPO ADD CONSTRAINT FK_ASIGNATURAS_MATRICULA_GRUPO_grupo_ID FOREIGN KEY (grupo_ID) REFERENCES GRUPO (ID);
ALTER TABLE ASIGNATURAS_MATRICULA_GRUPO ADD CONSTRAINT ASIGNATURASMATRICULA_GRUPOAsignaturas_matricula_ID FOREIGN KEY (Asignaturas_matricula_ID) REFERENCES ASIGNATURAS_MATRICULA (ID);
ALTER TABLE ENCUESTA_EXPEDIENTE ADD CONSTRAINT FK_ENCUESTA_EXPEDIENTE_Encuesta_ID FOREIGN KEY (Encuesta_ID) REFERENCES ENCUESTA (ID);
ALTER TABLE ENCUESTA_EXPEDIENTE ADD CONSTRAINT FK_ENCUESTA_EXPEDIENTE_expedientes_NUM_EXPEDIENTE FOREIGN KEY (expedientes_NUM_EXPEDIENTE) REFERENCES EXPEDIENTE (NUM_EXPEDIENTE);
ALTER TABLE ALUMNO_EXPEDIENTE ADD CONSTRAINT FK_ALUMNO_EXPEDIENTE_Alumno_ID FOREIGN KEY (Alumno_ID) REFERENCES ALUMNO (ID);
ALTER TABLE ALUMNO_EXPEDIENTE ADD CONSTRAINT FK_ALUMNO_EXPEDIENTE_expedientes_NUM_EXPEDIENTE FOREIGN KEY (expedientes_NUM_EXPEDIENTE) REFERENCES EXPEDIENTE (NUM_EXPEDIENTE);
ALTER TABLE CLASE_ASIGNATURA ADD CONSTRAINT FK_CLASE_ASIGNATURA_HORA_INICIO FOREIGN KEY (HORA_INICIO, DIA) REFERENCES CLASE (HORA_INICIO, DIA);
ALTER TABLE CLASE_ASIGNATURA ADD CONSTRAINT FK_CLASE_ASIGNATURA_asignatura_REFERENCIA FOREIGN KEY (asignatura_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA);
ALTER TABLE CLASE_GRUPO ADD CONSTRAINT FK_CLASE_GRUPO_HORA_INICIO FOREIGN KEY (HORA_INICIO, DIA) REFERENCES CLASE (HORA_INICIO, DIA);
ALTER TABLE CLASE_GRUPO ADD CONSTRAINT FK_CLASE_GRUPO_grupo_ID FOREIGN KEY (grupo_ID) REFERENCES GRUPO (ID);
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT DECIMAL(38), PRIMARY KEY (SEQ_NAME));
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0);
